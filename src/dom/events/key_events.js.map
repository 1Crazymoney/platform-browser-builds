{"version":3,"sources":["../../../../../../modules/@angular/platform-browser/src/dom/events/key_events.ts"],"names":[],"mappings":"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","file":"key_events.js","sourceRoot":"","sourcesContent":["/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {Inject, Injectable, NgZone} from '@angular/core/index';\n\nimport {getDOM} from '../dom_adapter';\nimport {DOCUMENT} from '../dom_tokens';\n\nimport {EventManagerPlugin} from './event_manager';\n\nconst /** @type {?} */ MODIFIER_KEYS = ['alt', 'control', 'meta', 'shift'];\nconst /** @type {?} */ MODIFIER_KEY_GETTERS: {[key: string]: (event: KeyboardEvent) => boolean} = {\n  'alt': (event: KeyboardEvent) => event.altKey,\n  'control': (event: KeyboardEvent) => event.ctrlKey,\n  'meta': (event: KeyboardEvent) => event.metaKey,\n  'shift': (event: KeyboardEvent) => event.shiftKey\n};\n/**\n * \\@experimental\n */\nexport class KeyEventsPlugin extends EventManagerPlugin {\n/**\n * @param {?} doc\n */\nconstructor( doc: any) { super(doc); }\n/**\n * @param {?} eventName\n * @return {?}\n */\nsupports(eventName: string): boolean { return KeyEventsPlugin.parseEventName(eventName) != null; }\n/**\n * @param {?} element\n * @param {?} eventName\n * @param {?} handler\n * @return {?}\n */\naddEventListener(element: HTMLElement, eventName: string, handler: Function): Function {\n    const /** @type {?} */ parsedEvent = KeyEventsPlugin.parseEventName(eventName);\n\n    const /** @type {?} */ outsideHandler =\n        KeyEventsPlugin.eventCallback(parsedEvent['fullKey'], handler, this.manager.getZone());\n\n    return this.manager.getZone().runOutsideAngular(() => {\n      return getDOM().onAndCancel(element, parsedEvent['domEventName'], outsideHandler);\n    });\n  }\n/**\n * @param {?} eventName\n * @return {?}\n */\nstatic parseEventName(eventName: string): {[key: string]: string} {\n    const /** @type {?} */ parts: string[] = eventName.toLowerCase().split('.');\n\n    const /** @type {?} */ domEventName = parts.shift();\n    if ((parts.length === 0) || !(domEventName === 'keydown' || domEventName === 'keyup')) {\n      return null;\n    }\n\n    const /** @type {?} */ key = KeyEventsPlugin._normalizeKey(parts.pop());\n\n    let /** @type {?} */ fullKey = '';\n    MODIFIER_KEYS.forEach(modifierName => {\n      const /** @type {?} */ index: number = parts.indexOf(modifierName);\n      if (index > -1) {\n        parts.splice(index, 1);\n        fullKey += modifierName + '.';\n      }\n    });\n    fullKey += key;\n\n    if (parts.length != 0 || key.length === 0) {\n      // returning null instead of throwing to let another plugin process the event\n      return null;\n    }\n\n    const /** @type {?} */ result: {[k: string]: string} = {};\n    result['domEventName'] = domEventName;\n    result['fullKey'] = fullKey;\n    return result;\n  }\n/**\n * @param {?} event\n * @return {?}\n */\nstatic getEventFullKey(event: KeyboardEvent): string {\n    let /** @type {?} */ fullKey = '';\n    let /** @type {?} */ key = getDOM().getEventKey(event);\n    key = key.toLowerCase();\n    if (key === ' ') {\n      key = 'space';  // for readability\n    } else if (key === '.') {\n      key = 'dot';  // because '.' is used as a separator in event names\n    }\n    MODIFIER_KEYS.forEach(modifierName => {\n      if (modifierName != key) {\n        const /** @type {?} */ modifierGetter = MODIFIER_KEY_GETTERS[modifierName];\n        if (modifierGetter(event)) {\n          fullKey += modifierName + '.';\n        }\n      }\n    });\n    fullKey += key;\n    return fullKey;\n  }\n/**\n * @param {?} fullKey\n * @param {?} handler\n * @param {?} zone\n * @return {?}\n */\nstatic eventCallback(fullKey: any, handler: Function, zone: NgZone): Function {\n    return (event: any /** TODO #9100 */) => {\n      if (KeyEventsPlugin.getEventFullKey(event) === fullKey) {\n        zone.runGuarded(() => handler(event));\n      }\n    };\n  }\n/**\n * \\@internal\n * @param {?} keyName\n * @return {?}\n */\nstatic _normalizeKey(keyName: string): string {\n    // TODO: switch to a Map if the mapping grows too much\n    switch (keyName) {\n      case 'esc':\n        return 'escape';\n      default:\n        return keyName;\n    }\n  }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Injectable },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: undefined, decorators: [{ type: Inject, args: [DOCUMENT, ] }, ]},\n];\n}\n\nfunction KeyEventsPlugin_tsickle_Closure_declarations() {\n/** @type {?} */\nKeyEventsPlugin.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nKeyEventsPlugin.ctorParameters;\n}\n\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}